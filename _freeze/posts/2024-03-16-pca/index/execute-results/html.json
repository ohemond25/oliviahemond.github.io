{
  "hash": "6fd2fed93002be5100e83fba55fbb1da",
  "result": {
    "markdown": "---\ntitle: \"Principal Components Analysis\"\ndescription: \"Using PCA to determine the relationship between historical redlining practices and present-day environmental health inequities\"\nauthor: \"Olivia Hemond\"\ndate: 03-16-2024\nimage: fig2.png\ndraft: false\ncategories: [R, Visualization, PCA]\nformat: \n  html:\n    code-fold: show\n    toc: true\n    embed-resources: true\neditor: visual\ntheme: flatly\nexecute: \n  echo: true\n  message: false\n  warning: false\n---\n\n\n# Overview\n\n## Purpose\n\nPrincipal components analysis (PCA) is used to simplify multivariate data into just two dimensions while explaining as much of the variance as possible. In this data set, each data point is one census tract and its associated environmental health variables, as well as its historically assigned redlining grade. Historic redlining was largely based upon racial demographics of different neighborhoods. Since redlining grades were used by mortgage lenders to make home loan and investment decisions, neighborhoods in lower grades systematically received less investments and resources. Therefore, the legacies of redlining may have disproportionately negative impacts on communities of color today.\n\nI am interested in using this analysis to determine whether historical redlining is related to modern-day patterns in urban health inequalities. I will conduct PCA to examine how these health and environmental variables are related to each other, and whether census tracts from distinct redlining categories are dissimilar to each other.\n\n## Data summary\n\nThe data used in this analysis describe each census tract in the City of Los Angeles in terms of various health indicators and environmental characteristics. Specifically, I am interested in examining the relationships between PM2.5 pollution, diesel pollution, lead paint exposure, drinking water quality, asthma, education, poverty, unemployment, tree canopy coverage, and heat related illness rates. In addition, where data on historic redlining is available, each census tract is matched to its historic redlining grade (A = Best, B = Still Desirable, C = Definitely Declining, D = Hazardous).\n\n**Data sources:**\n\n-   Census/Health Data: California Office of Environmental Health Hazard Assessment. “CalEnviroScreen 4.0” <https://oehha.ca.gov/calenviroscreen/maps-data/download-data>. February 2024.\n-   Canopy Coverage Data: Loyola Marymount University. “Tree Canopy Coverage”. March 2024.\n-   Modern Redlining Data: diversitydatakids.org. 2023. “Home Owner Loan Corporation (HOLC) neighborhood grades for US census\". <https://data.diversitydatakids.org/dataset/holc_census_tracts-home-owner-loan-corporation--holc--neighborhood-grades-for-us-census-tracts?_external=True> on Mar 03 2024, based on HOLC maps digitized by the Digital Scholarship Lab at the University of Richmond.\n-   Heat Risk Data: UCLA Center for Healthy Climate Solutions & UCLA Center for Public Health and Disasters. “UCLA Heat Maps”. <https://sites.google.com/g.ucla.edu/uclaheatmaps/map>. Downloaded February 2024.\n\n## Analytical outline\n\nTo conduct this PCA analysis, I used the following process:\n\n1.  Get and tidy data\n\n2.  Examine variable distributions and log variables if needed\n\n3.  Run PCA\n\n4.  Plot results\n\n# Analysis\n\n### Get and tidy data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load libraries\nlibrary(tidyverse)\nlibrary(here)\nlibrary(sf)\nlibrary(ggfortify)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get data\nenviroscreen <- read_sf(here('posts', '2024-03-16-pca', 'data', 'enviroscreen_final.gpkg'))\n\n# Tidy data: remove geometry column, select only variables of interest, drop NAs\nenviroscreen_clean <- enviroscreen %>% \n  st_drop_geometry() %>% \n  select(pm2_5, diesel_pm, lead, drinking_water = drink_wat, asthma, education = educatn, poverty, \n         unemployment = unempl, canopy_cover = existing_canopy_pct, heat_illness = zip_pct_64, redlining = class1) %>% \n  drop_na() %>% \n  mutate(diesel_pm = log(diesel_pm),\n         canopy_cover = log(canopy_cover)) # Log the most skewed variables\n```\n:::\n\n\n### Examine variable distributions\n\nI plotted histograms of each variable in my data to examine their distributions. As a couple were highly skewed (diesel_pm and canopy_cover), I logged those (see code above) to approximate a more normal distribution.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Pivot only the numeric columns. \nenviroscreen_long <- enviroscreen_clean %>% \n  pivot_longer(names_to = 'name', values_to = 'value', where(is.numeric))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plot\nggplot(enviroscreen_long, aes(x = value)) +\n  geom_histogram(fill = \"deepskyblue3\", bins = 25) +\n  facet_wrap(~ name, \n             scales = 'free',\n             ncol = 5) +\n  theme_minimal() +\n  labs(x = \"Value\", y = \"Count\")\n```\n\n::: {.cell-output-display}\n![Histograms showing the distribution of each of the ten numeric variables in the data. Diesel particulate matter and canopy cover were logged to approximate a more normal distribution.](index_files/figure-html/fig-histogram-1.png){#fig-histogram width=960}\n:::\n:::\n\n\n### Run PCA\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Run PCA. Scale data so that disparate variables are more comparable\nenviroscreen_pca <- enviroscreen_clean %>% \n  select(where(is.numeric)) %>% # PCA requires numeric variables\n  prcomp(scale = TRUE)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nredlining_colors <- c(\"A\" = \"limegreen\", \"B\" = \"deepskyblue2\", \"C\" = \"orange\", \"D\" = \"firebrick1\")\n\nautoplot(enviroscreen_pca, # pca results\n     \tdata = enviroscreen_clean, # raw data\n     \tcolor = \"redlining\",\n     \tloadings = TRUE, # add arrows\n     \tloadings.label = TRUE, # label arrows\n     \tloadings.colour = \"black\", # make arrows black\n     \tloadings.label.colour = \"black\", # make text black\n     \tloadings.label.vjust = -0.5\n     \t) +\n  scale_color_manual(values = redlining_colors) +\n  labs(color = \"Redlining Grade\") +\n  theme_minimal() \n```\n\n::: {.cell-output-display}\n![PCA biplot for environmental health indicators in the City of Los Angeles. Arrows represent the loading for each variable in the dimensions of PC1 and PC2. Each census tract observation is colored based upon its historical redlining grade.](index_files/figure-html/fig-pca-1.png){#fig-pca width=960}\n:::\n:::\n\n\n# Conclusions\n\nBased upon this data and PCA plot, I observed that:\n\n-   Poverty, low educational achievement, and unemployment are all highly positively correlated. This reflects the cyclical effects of poverty, in that education is harder to obtain and stable jobs are harder to keep, perpetuating these conditions.\n\n-   Asthma and heat illness rates are highly positively correlated. Interestingly, asthma rates are not strongly correlated with diesel particulate matter or PM2.5 pollution. Perhaps there are other pollutants or risk factors that are more significant contributors to asthma.\n\n-   The amount of tree canopy cover in a census tract is generally negatively correlated with poverty, low educational achievement, unemployment, and lead paint exposure. Areas in the \"A\" grade generally had high canopy cover. This is a notable indication that higher canopy coverage seems to be present in more affluent communities, which are more economically stable and have lower health risks.\n\n-   Interestingly, census tracts do not clearly cluster based upon redlining grade, but rather there seems to be a large amount of variation in the tracts in each grade. The one exception seems to be \"A\" areas, which are generally found within the left half of the plot. The lack of clear clustering indicates there may be other variables worth exploring that more clearly delineate the differences between these areas. Alternatively, modern-day differences between redlining areas \"B\", \"C\", and \"D\" may not be as clear-cut as I had hypothesized. In either case, more detailed analysis and potentially more data would be needed.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}